---
---

@mixin fill()
  position: absolute
  overflow: hidden
  top:     0
  bottom:  0
  left:    0
  right:   0

@mixin center-child()
  overflow:   hidden
  text-align: center

  &:before
    height:  100%
    content: ''

  &:before, & > *
    display: inline-block
    vertical-align: middle
    max-width:  100%
    max-height: 100%

@mixin checkers()
  background: url(../img/checkers.png)

body
  @include fill()
  cursor: default
  background: black
  user-select: none
  -ms-user-select: none
  -moz-user-select: -moz-none
  -khtml-user-select: none
  -webkit-user-select: none
  -ms-touch-action: none

ul
  list-style: none
  margin:  0
  padding: 0

select
  // Selects are partially styled. WTF.
  color: black

.tabs
  & > .tab
    display: none

  & > .tabbar, & > .tab.active
    display: inline-block
    vertical-align: top

  & > .tabbar > li, & > .tab
    padding: 15px

.main-area
  @include center-child()
  cursor: crosshair
  height: 100%

  & > .background
    @include checkers()
    overflow: auto

    & > .layers
      isolation: isolate  // do not blend with the checkered background
      position: relative

      & > *
        position: absolute
        pointer-events: none  // all mouse events are handled by the container

      & > .active
        outline: 1px dashed yellow
        outline-offset: -1px

.crosshair
  position: absolute
  pointer-events: none
  will-change: left, top

.selection
  top: 0
  left: 0
  z-index: 65538
  opacity: 0.5

.side-area
  position: relative
  overflow: hidden
  width:  45px
  height: 100%
  float: right

  background: black
  color:      white

  & > .toolbar-row
    & > *
      width:   45px
      height:  45px
      padding: 6px
      display: inline-block

      font-size:  20px
      text-align: center
      color:      inherit
      cursor:     pointer

      *, &, &:before
        vertical-align: middle

    & > .action-tool
      box-shadow: 0 0 10px -5px #000 inset

    & > .action-undo, & > .action-redo
      display: none

  & > .layer-menu
    overflow-x: hidden
    overflow-y: auto
    width:  100%
    height: calc(100% - 225px)

    & > li
      @include checkers()
      opacity: 0.5
      display: table
      font-size: 0
      text-align: center

      &:not(:first-child)
        border-top: 1px solid #777

      &.dragging
        position: absolute
        z-index: 65539

      &.dragging, &.active
        opacity: 1

      & > canvas
        max-height: 60px
        max-width:  45px
        display: inline-block
        outline: 1px dashed gray
        outline-offset: -1px

      &.active > canvas
        outline-color: yellow

.cover
  @include fill()
  z-index: 65540

  &.selector > *
    position: absolute
    color: white
    background: #000
    box-shadow: 0 0 20px -5px #000

    &.fixed
      /* Must sync up with .side-area{width} */
      right: 45px
      left: auto !important
      border-top-right-radius: 0
      border-bottom-right-radius: 0

  & > .fixed .not-fixed-only, & > :not(.fixed) .fixed-only
    display: none

.selector-main
  border-radius: 100px 0 0 100px
  white-space: nowrap
  font-size: 0

  &:not(.fixed)
    margin-left: -215px
    margin-top: -100px

  & > *
    vertical-align: top
    display: inline-block

.selector-width
  border-left:  1px solid #444
  border-right: 1px solid #444
  text-align: center
  box-sizing: content-box

.selector-width, .selector-spacing, .selector-opacity
  cursor: ns-resize

.selector-color, .selector-palette
  cursor: crosshair

.selector-color
  margin-right: 10px

.selector-text
  padding: 15px
  overflow: hidden
  border-radius: 5px

  & > :not(:last-child)
    margin-bottom: 15px

  & > .header
    font-weight: bold

  .table
    &:last-child
      margin-bottom: 0

    th, td
      border-color: #444

  .tabs
    margin: -15px

    & > .tabbar
      border-right: 1px solid #444

      & > .active
        background: #333

  .warning
    background: #dd9900
    display: block
    float: none
    clear: both
    margin: 0 -15px
    padding: 15px
    box-shadow: 0 0 20px -10px #000 inset

    &:last-child
      border-bottom-left-radius: 5px
      box-shadow: 0 20px 20px -20px #000 inset
      margin-bottom: -15px
