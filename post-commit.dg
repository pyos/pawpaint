#!/usr/bin/python3 -mdg
import '/os'

root  = next $ filter (x -> '.git' in os.listdir x) $ iterate (+ '/..') '.'
files = where for (p, _, fs) in os.walk root => for f in fs => yield $ os.path.join p f


for f in files =>
  _, _, e = f.rpartition '.'

  if e in ('sass', 'scss', 'coffee') =>
    source = with fd = open f 'r' => fd.read!
    result = with fd = open f 'w' =>
      if source.startswith '---\n---\n\n' =>
         source = source !! slice 9 None
      fd.write source
